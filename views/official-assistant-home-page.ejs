<%- include('includes/header') %>
<%- include('includes/flash') %>
<div>
    <h1 class="text-center">This is offitial assistant home page!!</h1>
    <h2 class="text-center">Assistant name is : <%=user.userName%></h2>
    <h2 class="text-center">Department code name is : <%=user.regNumber%></h2>
</div>
<div class="signUp-form-container ">  
    <%if(!departmentDetails.isDepartmentRunning){%>
        <div class="logIn-form-container mt-4 mb-5 text-center">   
            <h2 class="bolder">Open Department</h2>
            <form action="/department/<%=departmentDetails.departmentCode%>/open" method="POST" class="">
                <div class="form-group">
                    <label for="open" class="text-muted mb-1"><small>Write "OPEN" to start departmental activity :-</small></label>
                    <input  name="open" id="open" class="form-control form-control-lg " type="text" placeholder="Write:'OPEN' here." required autocomplete="off">
                </div>
                <button class="btn btn-info btn-block btn-lg">Open</button>
            </form>
        </div>
            
    <%}else{%>
        <div class="accordion" id="accordionExample">
            <div class="card">
              <div class="card-header" id="headingOne">
                <h2 class="mb-0">
                  <button class="btn btn-block btn-lg btn-danger" type="button" data-toggle="collapse" data-target="#collapseClose" aria-expanded="true" aria-controls="collapseClose">
                    Close Department
                  </button>
                </h2>
              </div>
          
              <div id="collapseClose" class="collapse " aria-labelledby="headingOne" data-parent="#accordionExample">
                <div class="card-body">
                    <div class="logIn-form-container mt-3 mb-4 text-center">   
                        <h2 class="bolder">Close Department</h2>
                        <form action="/department/<%=departmentDetails.departmentCode%>/close" method="POST" class="">
                            <div class="form-group">
                                <label for="close" class="text-muted mb-1"><small>Write "CLOSE" to start departmental activity :-</small></label>
                                <input  name="close" id="close" class="form-control form-control-lg " type="text" placeholder="Write:'CLOSE' here." required autocomplete="off">
                            </div>
                            <button class="btn btn-danger btn-block btn-lg">Close</button>
                        </form>
                    </div>
                </div>
              </div>
            </div>
        </div>
        <hr>
    <h3 class="text-center text-info">Today's Present Professors</h3>
    <%if(!departmentDetails.todaysPresentProfessors.length){%>
        <div class="btn btn-lg btn-block btn-info">No professor present till now.</div>
    <%}else{%>
      <%departmentDetails.todaysPresentProfessors.forEach((professor)=>{%>
        <li class="list-group-item list-group-item-action d-flex align-items-center">
            <div class="mr-auto d-flex align-items-center"> 
              <div class="mr-2">
                <img class="member-avatar"  src="/image/id" alt="">
              </div>
              <div>
                <span class="item-text  d-block"><strong>Name : </strong><%=professor.userName%></span>
                <span class="item-text  d-block"><strong>Time : </strong><%=professor.time%></span>
            </div>
            </div>
            <div>
                <form action="/professor/<%=departmentDetails.departmentCode%>/attendenceUndo" method="post">
                    <input type="hidden" name="regNumber" value="<%=professor.regNumber%>" >
                    <button  class=" btn btn-warning btn-sm">Undo Attendence</button>
                </form>
            </div>
          </li>
      <%})%>
    <%}%>
      <hr>
      <h3 class="text-center text-info">All Professors</h3>
      <%departmentDetails.allProfessors.forEach((professor)=>{%>
        <li class="list-group-item list-group-item-action d-flex align-items-center">
            <div class="mr-auto d-flex align-items-center"> 
              <div class="mr-2">
                <img class="member-avatar"  src="/image/id" alt="">
              </div>
              <div>
                <span class="item-text  d-block"><strong>Name : </strong><%=professor.userName%></span>
              </div>
            </div>
            <div>
                <%if(presentProfessors.includes(professor.regNumber)){%>
                    <button  class="disable btn btn-info btn-sm">Added</button>
                   
                <%}else{%>
                    <form action="/professor/<%=departmentDetails.departmentCode%>/attendence" method="post">
                        <input type="hidden" name="regNumber" value="<%=professor.regNumber%>" >
                        <input type="hidden" name="userName" value="<%=professor.userName%>" >
                        <button  class=" btn btn-primary btn-sm">Click to mark present</button>
                    </form>
                <%}%>
                
              </div>
          </li>
      <%})%>
    <%}%>
  </div>

<%- include('includes/footer') %>